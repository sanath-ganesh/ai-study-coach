---chunk-0---
Lecture 9: Bag Implementations that Use Arrays - 1 Materials are edited by Prof. Jones Yu fromData Structures and Abstractions with Java, 5th edition. By Frank M. Carrano and Timothy M. Henry. ISBN-13 978-0-13-483169-5 © 2019 Pearson Education, Inc. Prof. Chen-Hsiang (Jones) Yu, Ph.D.College of Engineering 2INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Figure 2-1: A classroom that contains desks in fixed positions Fixed-Size Array to Implement the ADT Bag Implementing the Core Methods 4INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Recall the Interface - BagInterface 5INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Figure 2-2: UML notation for the class ArrayBag, including the class’s data fields Fixed-Size Array 6INFO 6205 -ProgramStructureand AlgorithmsFall 2024Listing 2-1: An outline of the class ArrayBag Fixed-Size Array/** A class of bags whose entries are stored in a fixed-size array.INITIAL, INCOMPLETE DEFINITION; no security checks*/publicfinalclassArrayBag<T> implementsBagInterface<T>{privatefinalT[] bag;privateintnumberOfEntries;privatestaticfinalintDEFAULT_CAPACITY = 25;/** Creates an empty bag whose initial capacity is 25. */publicArrayBag(){this(DEFAULT_CAPACITY);} // end default constructor/** Creates an empty bag having a given initial capacity.@paramdesiredCapacityThe integer capacity desired. */publicArrayBag(intdesiredCapacity){// The cast is safe because the new array contains null entries.@SuppressWarnings("unchecked")T[] tempBag= (T[])newObject[desiredCapacity]; // Unchecked castbag = tempBag;numberOfEntries= 0;} // end constructorUnchecked cast means that you are (implicitly or explicitly) casting from a generic type to a nonqualified type or the other way around. final keyword has a numerous way to use: - A final class cannot be subclassed. - A final method cannot be overridden by subclasses - A final variable can only be initialized once 7INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Fixed-Size Array/** Adds a new entry to this bag.@paramnewEntryThe object to be added as a new entry.@returnTrue if the addition is successful, or false if not. */publicbooleanadd(T newEntry){ // To be defined} // end add/** Retrieves all entries that are in this bag.@returnA newly allocated array of all the entries in this bag. */publicT[] toArray(){ // To be defined} // end toArray// Returns true if the array bag is full, or false if not.privatebooleanisArrayFull(){ // To be defined} // end isArrayFull ...} // end ArrayBagListing 2-1: An outline of the class ArrayBag 8INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Figure 2-3: Adding entries to an array that represents a bag, whose capacity is six, until it becomes full Fixed-Size Array ArrayBag<String> myBag =new ArrayBag<String>(); 9INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Fixed-Size Array Figure 2-3: Adding entries to an array that represents a bag, whose capacity is six, until it becomes full 10INFO 6205 -ProgramStructureand AlgorithmsFall 2024 §Please implement add() method for ArrayBag class.Exercise /** Adds a new entry to this bag.@paramnewEntrythe object to be added as a new entry.@returnTrue if the addition is successful, or false if not.*/publicbooleanadd(T newEntry) { // ADD YOUR CODE HERE } // end add 11INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Method add() Answer/** Adds a new entry to this bag.@paramnewEntrythe object to be added as a new entry.@returnTrue if the addition is successful, or false if not.*/publicbooleanadd(T newEntry) { booleanresult = true; if(isArrayFull()) { result = false; } else { // Assertion: result is true here bag[numberOfEntries] = newEntry; numberOfEntries++; } // end if returnresult; } // end add 12INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Method isArrayFull() Answer (cont.) // Returns true if this bag is full, or false if not.privatebooleanisArrayFull(){ returnnumberOfEntries>= bag.length;} // end isArrayFull 13INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Method toArray Fixed-Size Array/** Retrieves all entries that are in this bag.@returnA newly allocated array of all the entries in the bag. */publicT[]toArray() {// The cast is safe because the new array contains null entries.@SuppressWarnings("unchecked")T[] result = (T[])newObject[numberOfEntries]; // Unchecked castfor(intindex = 0; index < numberOfEntries; index++){result[index] = bag[index];} // end forreturnresult;} // end toArray 14INFO 6205 -ProgramStructureand AlgorithmsFall 2024 §Should the method toArray return the array bag instead of a copy? Question 15INFO 6205 -ProgramStructureand AlgorithmsFall 2024 §No.§Assume bagArray is an alias for the private instance variable bag within the object myBag.§A client could change the contents of the bag without calling the class’s public methods. Answer public String[] toArray(){ return bag;}...String[] bagArray = myBag.toArray(); Making the Implementation Secure 17INFO 6205 -ProgramStructureand AlgorithmsFall 2024 §Practice fail-safe programming by including checks for anticipated errors§Validate input data and arguments to a method§Refine incomplete implementation of ArrayBag to make code more secure by adding the following two data fields Making the Implementation Secure privatebooleanintegrityOK= false;privatestaticfinalintMAX_CAPACITY = 10000; 18INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Revised constructor Making the Implementation Secure/** Creates an empty bag having a given capacity.@paramdesiredCapacityThe integer capacity desired. */publicArrayBag(intdesiredCapacity){integrityOK= false; if(desiredCapacity<= MAX_CAPACITY){// The cast is safe because the new array contains null entries@SuppressWarnings("unchecked")T[] tempBag= (T[])newObject[desiredCapacity]; // Unchecked castbag = tempBag;numberOfEntries= 0;integrityOK= true;}elsethrownewIllegalStateException("Attempt to create a bag whose"+"capacity exceeds allowed maximum.");} // end constructor 19INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Method to check initialization Making the Implementation Secure // Throws an exception if this object is not initialized.privatevoidcheckIntegrity(){if(!integrityOK)thrownewSecurityException("ArrayBagobject is corrupt.");} // end checkIntegrity
