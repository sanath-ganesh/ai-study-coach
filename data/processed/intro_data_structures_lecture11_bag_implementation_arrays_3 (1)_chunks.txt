---chunk-0---
Lecture 11: Bag Implementations that Use Arrays - 3 Materials are edited by Prof. Jones Yu fromData Structures and Abstractions with Java, 5th edition. By Frank M. Carrano and Timothy M. Henry. ISBN-13 978-0-13-483169-5 © 2019 Pearson Education, Inc. Prof. Chen-Hsiang (Jones) Yu, Ph.D.College of Engineering 2INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Figure 2-2: UML notation for the class ArrayBag, including the class’s data fields Fixed-Size Array // Throws an exception if this object is not initialized. private void checkIntegrity() { if (!integrityOK) throw newSecurityException("ArrayBag object is corrupt."); } // end checkIntegrity /** Creates an empty bag having a given capacity.@paramdesiredCapacityThe integer capacity desired. */publicArrayBag(intdesiredCapacity){integrityOK= false; if(desiredCapacity<= MAX_CAPACITY){// The cast is safe because the new array contains null entries@SuppressWarnings("unchecked")T[] tempBag= (T[])newObject[desiredCapacity]; // Unchecked castbag = tempBag;numberOfEntries= 0;integrityOK= true;}elsethrownewIllegalStateException("Attempt to create a bag whose"+"capacity exceeds allowed maximum.");} // end constructor... Reminder 4INFO 6205 -ProgramStructureand AlgorithmsFall 2024Methods isEmpty and getCurrentSize Implementing More Methods/** Sees whether this bag is empty.@returnTrue if this bag is empty, or false if not. */publicbooleanisEmpty(){returnnumberOfEntries== 0;} // end isEmpty /** Gets the current number of entries in this bag.@returnThe integer number of entries currently in this bag. */publicintgetCurrentSize(){returnnumberOfEntries;} // end getCurrentSize 5INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Method getFrequencyOf Implementing More Methods/** Counts the number of times a given entry appears in this bag.@paramanEntryThe entry to be counted.@returnThe number of times anEntryappears in this bag. */publicintgetFrequencyOf(T anEntry){checkIntegrity();intcounter = 0;for(intindex = 0; index < numberOfEntries; index++){if(anEntry.equals(bag[index])){counter++;} // end if} // end for return counter; } 6INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Method contains Implementing More Methods/** Tests whether this bag contains a given entry.@paramanEntryThe entry to locate.@returnTrue if this bag contains anEntry, or false otherwise. */publicbooleancontains(T anEntry){ checkIntegrity();booleanfound = false; intindex = 0; while(!found&& (index < numberOfEntries)) { if(anEntry.equals(bag[index])) {found = true; } // end if index++; } // end whilereturnfound;} // end contains 7INFO 6205 -ProgramStructureand AlgorithmsFall 2024 The method clear Methods That Remove Entries /** Removes all entries from this bag. */publicvoidclear() {while(!isEmpty())remove();} // end clear Remove Entries 9INFO 6205 -ProgramStructureand AlgorithmsFall 2024 The method remove Methods That Remove Entries/** Removes one unspecified entry from this bag, if possible.@returnEither the removed entry, if the removalwas successful, or null. */publicT remove(){checkIntegrity();T result = null; if(numberOfEntries> 0)) {result = bag[numberOfEntries-1];bag[numberOfEntries-1] = null;numberOfEntries--; } // end ifreturnresult;} // end remove 10INFO 6205 -ProgramStructureand AlgorithmsFall 2024 §Why does the method remove() replace the entry removed from the array bag with null? Question 11INFO 6205 -ProgramStructureand AlgorithmsFall 2024 §By setting bag[numberOfEntries] to null, the method causes the memory assigned to the deleted entry to be recycled, unless another reference to that entry exists in the client. Answer 12INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Figure 2-4: The array bag after a successful search for the string “Tia" Methods That Remove Entries 13INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Figure 2-5: (a) A gap in the array bag after setting the entry in bag[index] to null; (b) the array after shifting subsequent entries to avoid a gap Methods That Remove Entries 14INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Figure 2-6: Avoiding a gap in the array while removing an entry Methods That Remove Entries 15INFO 6205 -ProgramStructureand AlgorithmsFall 2024 The revised remove method Methods That Remove Entries /** Removes one occurrence of a given entry from this bag.@paramanEntryThe entry to be removed.@returnTrue if the removal was successful, or false if not. */publicbooleanremove(T anEntry){ checkIntegrity();intindex = getIndexOf(anEntry);T result = removeEntry(index);returnanEntry.equals(result);} // end remove /** Removes one unspecified entry from this bag, if possible.@returnEither the removed entry, if the removal was successful,or null otherwise. */publicTremove(){ checkIntegrity();T result = removeEntry(numberOfEntries-1); returnresult;} // end remove removeEntry returns the entry it removes or null 16INFO 6205 -ProgramStructureand AlgorithmsFall 2024 The removeEntry method Methods That Remove Entries// Removes and returns the entry at a given index within the array bag.// If no such entry exists, returns null.// Preconditions: 0 <= givenIndex< numberOfEntries;// checkIntegrityhas been called.privateT removeEntry(intgivenIndex){ T result = null; if(!isEmpty()&& (givenIndex>= 0)) {result = bag[givenIndex]; // Entry to removebag[givenIndex] = bag[numberOfEntries-1]; // Replace entry with last entrybag[numberOfEntries-1] = null; // Remove last entrynumberOfEntries--; } // end ifreturnresult;} // end removeEntry 17INFO 6205 -ProgramStructureand AlgorithmsFall 2024 §As shown above, can the return statement in the remove method to be written as follows? Question a. return result.equals(anEntry);b. return result != null; publicbooleanremove(T anEntry){checkIntegrity();intindex = getIndexOf(anEntry);T result = removeEntry(index);returnanEntry.equals(result);} 18INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Answer a. return result.equals(anEntry);b. Return result != null; 19INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Revised definition for the method contains Methods That Remove Entries publicbooleancontains(T anEntry){checkIntegrity();returngetIndexOf(anEntry)> -1; // or >= 0} // end contains 20INFO 6205 -ProgramStructureand AlgorithmsFall 2024Definition for the method getIndexOf Methods That Remove Entries// Locates a given entry within the array bag.// Returns the index of the entry, if located, or -1 otherwise.// Precondition: checkIntegrityhas been called.privateintgetIndexOf(T anEntry){ intwhere = -1;booleanfound = false;intindex = 0;while(!found && (index < numberOfEntries)){if(anEntry.equals(bag[index])){found = true;where = index;} // end ifindex++;} // end while// Assertion: If where > -1, anEntryis in the array bag, and it// equals bag[where]; otherwise, anEntryis not in the array returnwhere;} // end getIndexOf 21INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Figure 2-2: UML notation for the class ArrayBag, including the class’s data fields Fixed-Size Array 22INFO 6205 -ProgramStructureand AlgorithmsFall 2024 §Please revise the definition of the method getIndexOf() so that it does not use a Boolean variable. Question privateintgetIndexOf(T anEntry){ intwhere = -1;booleanfound = false;intindex = 0;while(!found && (index < numberOfEntries)){if(anEntry.equals(bag[index])){found = true;where = index;} // end ifindex++;} // end while returnwhere;} 23INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Answerprivate int getIndexOf(T anEntry){ int where = −1; for (int index = 0; (where == −1) && (index < numberOfEntries); index++) { if (anEntry.equals(bag[index]))where = index; } // end for return where;} // end getIndexOforprivate int getIndexOf(T anEntry){ int where = numberOfEntries − 1; while ((where > −1) && !anEntry.equals(bag[where])) where--; return where;} // end getIndexOf 24INFO 6205 -ProgramStructureand AlgorithmsFall 2024 §Download L11_E1 from “In-class Exercise” on the Brightspace§Import the project to the Eclipse §Run “ArrayBagDemo3.java”§Questions:»Why do you have this result?»What are we doing in testAdd(), testRemove() and testIsEmpty()? Exercise ==============================Testing an initially empty bag:Testing the two remove methods:Removing
---chunk-1---
end ifindex++;} // end while// Assertion: If where > -1, anEntryis in the array bag, and it// equals bag[where]; otherwise, anEntryis not in the array returnwhere;} // end getIndexOf 21INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Figure 2-2: UML notation for the class ArrayBag, including the class’s data fields Fixed-Size Array 22INFO 6205 -ProgramStructureand AlgorithmsFall 2024 §Please revise the definition of the method getIndexOf() so that it does not use a Boolean variable. Question privateintgetIndexOf(T anEntry){ intwhere = -1;booleanfound = false;intindex = 0;while(!found && (index < numberOfEntries)){if(anEntry.equals(bag[index])){found = true;where = index;} // end ifindex++;} // end while returnwhere;} 23INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Answerprivate int getIndexOf(T anEntry){ int where = −1; for (int index = 0; (where == −1) && (index < numberOfEntries); index++) { if (anEntry.equals(bag[index]))where = index; } // end for return where;} // end getIndexOforprivate int getIndexOf(T anEntry){ int where = numberOfEntries − 1; while ((where > −1) && !anEntry.equals(bag[where])) where--; return where;} // end getIndexOf 24INFO 6205 -ProgramStructureand AlgorithmsFall 2024 §Download L11_E1 from “In-class Exercise” on the Brightspace§Import the project to the Eclipse §Run “ArrayBagDemo3.java”§Questions:»Why do you have this result?»What are we doing in testAdd(), testRemove() and testIsEmpty()? Exercise ==============================Testing an initially empty bag:Testing the two remove methods:Removing a string from the bag:remove() returns nullThe bag contains 0 string(s), as follows: Removing "B" from the bag:remove("B") returns falseThe bag contains 0 string(s), as follows:------------------------------Adding to the bag: A A B A C A The bag contains 6 string(s), as follows:A A B A C A ------------------------------Testing the two remove methods:Removing a string from the bag:remove() returns AThe bag contains 5 string(s), as follows:A A B A C ResultsRemoving "A" from the bag:remove("A") returns trueThe bag contains 4 string(s), as follows:C A B A Removing "C" from the bag:remove("C") returns trueThe bag contains 3 string(s), as follows:A A B Removing "Z" from the bag:remove("Z") returns falseThe bag contains 3 string(s), as follows:A A B ------------------------------Clearing the bag:Testing the method isEmpty with an empty bag:isEmptyfinds the bag empty: OK.The bag contains 0 string(s), as follows:============================== Using Array Resizing to Implement the ADT Bag 27INFO 6205 -ProgramStructureand AlgorithmsFall 2024 §An array has a fixed size. It has pros and cons. (We will summarize it in a later slide)§Using a fixed size array to implement the ADT bag limits the size of the bag.§When an array becomes full, you can move its contents to a larger array. This process is called resizing an array or array resizing. Using Array Resizing 28INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Figure 2-7: Resizing an array copies its contents to a larger second array Using Array Resizing 29INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Figure 2-8: (a) An array; (b) two references to the same array; (c) the original array variable now references a new, larger array; Using Array Resizing 30INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Figure 2-8: (d) the entries in the original array are copied to the new array; (e) the original array is discarded Using Array Resizing Figure 2-9: The effect of the statement myArray = Arrays.copyOf(myArray, 2 * myArray.length);(a) The argument array; (b) the parameter that references the argument array; (c) a new, larger array that gets the contents of the argument array; (d) the return value that references the new array; (e) the argument variable is assigned the return value Arrays class: https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html 32INFO 6205 -ProgramStructureand AlgorithmsFall 2024 §Consider the array of strings that the following statement defines: What Java statements will increase the capacity of the array text by five elements without altering its current contents? Exercise String[] text = {“cat”, “dog”, “bird”, “snake”}; 33INFO 6205 -ProgramStructureand AlgorithmsFall 2024 Answer text = Arrays.copyOf(text, text.length+ 5);orString[] origText = text;text = new String[text.length + 5];System.arraycopy(origText, 0, text, 0, origText.length); 34INFO 6205 -ProgramStructureand AlgorithmsFall 2024Revised definition of method add New Implementation of a Bag/** Adds a new entry to this bag.@paramnewEntryThe object to be added as a new entry.@returnTrue. */publicbooleanadd(T newEntry){checkIntegrity();booleanresult = true;if(isArrayFull()){doubleCapacity();}// end ifbag[numberOfEntries] = newEntry;numberOfEntries++;returntrue;} // end add 35INFO 6205 -ProgramStructureand AlgorithmsFall 2024 The methods dcheckCapacity and doubleCapacity New Implementation of a Bag// Throws an exception if the client requests a capacity that is too large.privatevoidcheckCapacity(intcapacity){if(capacity > MAX_CAPACITY)thrownewIllegalStateException("Attempt to create a bag whose "+"capacity exeedsallowed "+"maximum of "+ MAX_CAPACITY);} // end checkCapacity// Doubles the size of the array bag.// Precondition: checkIntegrityhas been called.privatevoiddoubleCapacity(){intnewLength= 2* bag.length;checkCapacity(newLength);bag = Arrays.copyOf(bag, newLength);} // end doubleCapacity 36INFO 6205 -ProgramStructureand AlgorithmsFall 2024 §Pros:»Adding an entry to the bag is fast»Removing an unspecified entry is fast§Cons:»Removing a particular entry requires time to locate the entry»Increasing the size of the array requires time to copy its entries Pros and Cons of Using an Array 37INFO 6205 -ProgramStructureand AlgorithmsFall 2024 §Continue from L11_E1 §Please copy ArrayBag.java to create a new class, ResizableArrayBag, which can support Array Resizing.§Please also write a testing program for it. Exercise (offline) p.s. Array Resizing happens when you add elements into the bag, which is initialized with limited size. 38INFO 6205 -ProgramStructureand AlgorithmsFall 2024 §ResizableArrayBag.java (L11_E2_Solution.zip)Answer
---chunk-2---
the bag, which is initialized with limited size. 38INFO 6205 -ProgramStructureand AlgorithmsFall 2024 §ResizableArrayBag.java (L11_E2_Solution.zip)Answer
